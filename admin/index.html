<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo - Andes Gold</title>
    <link rel="stylesheet" href="../CSS/main.css">
    <link rel="stylesheet" href="./styles/admin.css">
    <link rel="stylesheet" href="./styles/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Open+Sans:wght@300;400;500&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body class="admin-body">
    <script>
        // Verificar autenticación al cargar el panel
        document.addEventListener('DOMContentLoaded', function () {
            const savedUser = localStorage.getItem('andesGoldAdminUser');
            if (!savedUser) {
                window.location.href = 'login.html';
            }
        });
    </script>
    <!-- Header del Admin -->
    <header class="admin-header">
        <div class="admin-nav">
            <div class="admin-logo">
                <h1><i class="fas fa-crown"></i> Andes Gold Admin</h1>
            </div>
            <div class="admin-user">
                <span id="admin-username">Administrador</span>
                <button class="btn-logout" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </button>
            </div>
        </div>
        <!-- En admin/index.html, en el header -->
        <div class="admin-user">
            <a href="../index.html" class="btn-store" title="Volver a la tienda">
                <i class="fas fa-store"></i>
            </a>
            <span id="admin-username">Administrador</span>
            <button class="btn-logout" id="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
            </button>
        </div>
    </header>

    <!-- Sidebar de Navegación -->
    <div class="admin-container">
        <aside class="admin-sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#dashboard" class="nav-link active" data-section="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#productos" class="nav-link" data-section="productos">
                            <i class="fas fa-box"></i>
                            <span>Productos</span>
                        </a>
                    </li>
                    <li>
                        <a href="#pedidos" class="nav-link" data-section="pedidos">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Pedidos</span>
                        </a>
                    </li>
                    <li>
                        <a href="#clientes" class="nav-link" data-section="clientes">
                            <i class="fas fa-users"></i>
                            <span>Clientes</span>
                        </a>
                    </li>
                    <li>
                        <a href="#inventario" class="nav-link" data-section="inventario">
                            <i class="fas fa-warehouse"></i>
                            <span>Inventario</span>
                        </a>
                    </li>
                    <li>
                        <a href="#reportes" class="nav-link" data-section="reportes">
                            <i class="fas fa-chart-bar"></i>
                            <span>Reportes</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Contenido Principal -->
        <main class="admin-main">
            <!-- Sección Dashboard -->
            <section id="dashboard" class="admin-section active">
                <div class="section-header">
                    <h2>Dashboard</h2>
                    <p>Resumen general del e-commerce</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon total-ventas">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-ventas">$0</h3>
                            <p>Ventas Totales</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon total-pedidos">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-pedidos">0</h3>
                            <p>Pedidos Totales</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon total-clientes">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-clientes">0</h3>
                            <p>Clientes Registrados</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon total-productos">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-productos">0</h3>
                            <p>Productos Activos</p>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>Ventas Mensuales</h3>
                        <canvas id="sales-chart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Productos Más Vendidos</h3>
                        <canvas id="products-chart"></canvas>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3>Actividad Reciente</h3>
                    <div class="activity-list" id="recent-activity">
                        <!-- Las actividades se cargarán aquí -->
                    </div>
                </div>
            </section>

            <!-- Sección Productos -->
            <section id="productos" class="admin-section">
                <div class="section-header">
                    <h2>Gestión de Productos</h2>
                    <button class="btn-primary" id="add-product-btn">
                        <i class="fas fa-plus"></i> Nuevo Producto
                    </button>
                </div>

                <div class="products-table-container">
                    <table class="admin-table" id="products-table">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Tamaño</th>
                                <th>Precio</th>
                                <th>Stock</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="products-tbody">
                            <!-- Los productos se cargarán aquí -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sección Pedidos -->
            <section id="pedidos" class="admin-section">
                <div class="section-header">
                    <h2>Gestión de Pedidos</h2>
                    <div class="filters">
                        <select id="order-status-filter">
                            <option value="all">Todos los estados</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="procesando">Procesando</option>
                            <option value="enviado">Enviado</option>
                            <option value="entregado">Entregado</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                </div>

                <div class="orders-table-container">
                    <table class="admin-table" id="orders-table">
                        <thead>
                            <tr>
                                <th>ID Pedido</th>
                                <th>Cliente</th>
                                <th>Fecha</th>
                                <th>Total</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="orders-tbody">
                            <!-- Los pedidos se cargarán aquí -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sección Clientes -->
            <section id="clientes" class="admin-section">
                <div class="section-header">
                    <h2>Gestión de Clientes</h2>
                </div>

                <div class="customers-table-container">
                    <table class="admin-table" id="customers-table">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Teléfono</th>
                                <th>Registro</th>
                                <th>Total Compras</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="customers-tbody">
                            <!-- Los clientes se cargarán aquí -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sección Inventario -->
            <section id="inventario" class="admin-section">
                <div class="section-header">
                    <h2>Gestión de Inventario</h2>
                    <button class="btn-primary" id="update-inventory-btn">
                        <i class="fas fa-sync"></i> Actualizar Inventario
                    </button>
                </div>

                <div class="inventory-table-container">
                    <table class="admin-table" id="inventory-table">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>SKU</th>
                                <th>Stock Actual</th>
                                <th>Stock Mínimo</th>
                                <th>Estado</th>
                                <th>Última Actualización</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-tbody">
                            <!-- El inventario se cargará aquí -->
                        </tbody>
                    </table>
                </div>

                <div class="low-stock-alert">
                    <h3>Alertas de Stock Bajo</h3>
                    <div id="low-stock-list">
                        <!-- Las alertas se cargarán aquí -->
                    </div>
                </div>
            </section>

            <!-- Sección Reportes -->
            <section id="reportes" class="admin-section">
                <div class="section-header">
                    <h2>Reportes y Estadísticas</h2>
                    <div class="report-actions">
                        <button class="btn-secondary" id="export-sales-btn">
                            <i class="fas fa-file-export"></i> Exportar Ventas
                        </button>
                        <button class="btn-secondary" id="generate-report-btn">
                            <i class="fas fa-chart-line"></i> Generar Reporte
                        </button>
                    </div>
                </div>

                <div class="report-filters">
                    <div class="filter-group">
                        <label for="report-type">Tipo de Reporte:</label>
                        <select id="report-type">
                            <option value="ventas">Ventas</option>
                            <option value="productos">Productos</option>
                            <option value="clientes">Clientes</option>
                            <option value="inventario">Inventario</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="date-from">Desde:</label>
                        <input type="date" id="date-from">
                    </div>
                    <div class="filter-group">
                        <label for="date-to">Hasta:</label>
                        <input type="date" id="date-to">
                    </div>
                    <button class="btn-primary" id="apply-filters-btn">Aplicar Filtros</button>
                </div>

                <div class="reports-content">
                    <div class="report-summary">
                        <h3>Resumen del Reporte</h3>
                        <div id="report-summary-content">
                            <!-- El resumen se cargará aquí -->
                        </div>
                    </div>
                    <div class="report-charts">
                        <canvas id="report-chart"></canvas>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para Productos -->
    <div class="modal" id="product-modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="product-modal-title">Nuevo Producto</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="product-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-name">Nombre del Producto</label>
                            <input type="text" id="product-name" required>
                        </div>
                        <div class="form-group">
                            <label for="product-sku">SKU</label>
                            <input type="text" id="product-sku" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-type">Tipo</label>
                            <select id="product-type" required>
                                <option value="real">Quinua Real</option>
                                <option value="organica">Orgánica</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="product-size">Tamaño</label>
                            <select id="product-size" required>
                                <option value="500g">500g</option>
                                <option value="1kg">1kg</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-price">Precio</label>
                            <input type="number" id="product-price" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="product-stock">Stock</label>
                            <input type="number" id="product-stock" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="product-description">Descripción</label>
                        <textarea id="product-description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="product-image">Imagen URL</label>
                        <input type="text" id="product-image">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-product-btn">Cancelar</button>
                        <button type="submit" class="btn-primary">Guardar Producto</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para Detalles de Pedido -->
    <div class="modal" id="order-modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Detalles del Pedido</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="order-details-content">
                    <!-- Los detalles del pedido se cargarán aquí -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../data/products.json"></script>
    <script src="../data/orders.json"></script>
    <script src="../data/users.json"></script>
    <script src="../data/inventory.json"></script>
    <script src="./js/products-admin.js"></script>
    <script src="./js/orders-admin.js"></script>
    <script src="./js/reports-admin.js"></script>
    <script src="./js/admin.js"></script>
</body>

</html>